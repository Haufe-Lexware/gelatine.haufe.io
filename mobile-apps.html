<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags-->
    <meta name="description" content="wicked.haufe.io">
    <meta name="author" content="donmartin76">
    <title>wicked.haufe.io - Open Source API Portal</title>
    <!-- Bootstrap core CSS-->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug-->
    <link href="css/ie10-viewport-bug-workaround.css" rel="stylesheet">
    <!-- Just for debugging purposes. Don't actually copy these 2 lines!-->
    <!--if lt IE 9script(src='../../assets/js/ie8-responsive-file-warning.js')
    -->
    <!-- <script src="js/ie-emulation-modes-warning.js"></script>-->
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries-->
    <!--if lt IE 9
    script(src='https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js')
    script(src='https://oss.maxcdn.com/respond/1.4.2/respond.min.js')
    -->
    <!-- Custom styles for this template-->
    <link href="css/carousel.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
  </head>
  <!--
  NAVBAR
  ==================================================
  -->
  <body>
    <div class="navbar-wrapper">
      <div class="container">
        <nav class="navbar navbar-inverse navbar-static-top">
          <div class="container">
            <div class="navbar-header">
              <button type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar" class="navbar-toggle collapsed"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="https://github.com/Haufe-Lexware/wicked.haufe.io" class="navbar-brand">wicked.haufe.io</a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
              <ul class="nav navbar-nav">
                <li><a href="index.html">Home</a></li>
                <li><a href="gettingstarted.html">Getting Started</a></li>
                <li class="dropdown">
                  <!-- data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a>--><a href="#" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle">Features <span class='caret'/></a>
                  <ul class="dropdown-menu">
                    <li><a href="features.html">Features</a></li>
                    <li><a href="deployment.html">Deployment</a></li>
                    <li><a href="authentication.html">Authentication</a></li>
                  </ul>
                </li>
                <li class="dropdown">
                  <!-- data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a>--><a href="#" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle">Use Cases <span class='caret'/></a>
                  <ul class="dropdown-menu">
                    <li><a href="machine-to-machine.html">Machine to Machine Communication</a></li>
                    <!--if (thisPage == 'enduser-to-api')-->
                    <!--  li.active-->
                    <!--    a(href='enduser-to-api.html') End User Authentication and Authorization-->
                    <!--else-->
                    <!--  li-->
                    <!--    a(href='enduser-to-api.html') End User Authentication and Authorization-->
                    <li class="active"><a href="mobile-apps.html">Mobile API Gateway</a></li>
                    <li><a href="single-page-apps.html">Single Page Application API Gateway</a></li>
                  </ul>
                </li>
                <li><a href="contact.html">Contact</a></li>
              </ul>
              <ul class="nav navbar-nav navbar-right">
                <li><a href="impressum.html">Impressum</a></li>
                <!--
                <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a>
                <ul class="dropdown-menu">
                <li><a href="#">Action</a></li>
                <li><a href="#">Another action</a></li>
                <li><a href="#">Something else here</a></li>
                <li role="separator" class="divider"></li>
                <li class="dropdown-header">Nav header</li>
                <li><a href="#">Separated link</a></li>
                <li><a href="#">One more separated link</a></li>
                </ul>
                </li>
                -->
              </ul>
            </div>
          </div>
        </nav>
      </div>
    </div>
    <div style="background: url(&quot;images/header-2-500.jpg&quot;); background-size:cover;" class="jumbotron">
      <div style="padding-top: 70px" class="container feature-container">
        <h1>Mobile API Gateway</h1>
        <p>Securing Mobile APIs using the OAuth2 Authorization Code Grant with PKCE</p>
      </div>
    </div>
    <div class="container pad20">
      <div class="row">
        <div class="col-md-8">
          <h4>Use Case Description</h4>
          <p>
            For mobile applications (on smartphones/tablets) a typical use case is that you let a user log in to your service,
            or create some kind of unique identifier for the user's device, which is considered the identity of the user,
            and that you then allow access only in the context of this user to your backend API.
          </p>
          <p>
            In order to prevent fraud or excessive usage of your API, it's also typical to apply rate limiting by number
            of calls per authorized user and application.
          </p>
          <p>
            You can now leverage the "local" authentication method of wicked to store your mobile users email addresses
            and passwords. Wicked can act as a full featured identity provider for your mobile backend, i.e. be a full
            mobile backend, including authentication and authorization.
            
          </p><img src="images/uc-mobile-api-gateway.png" class="center-block">
        </div>
      </div>
    </div>
    <div class="grey">
      <div class="container pad20">
        <div class="row">
          <div class="col-md-4">
            <p>&nbsp;</p>
          </div>
          <div class="col-md-8">
            <h4>Development Time Workflow</h4>
            <p>For development time, the following workflow is typical:</p>
            <ol>
              <li>The developer signs up for the API Portal and registers the mobile application in the portal, using a <a href="https://wicked-demo.haufe.io/help/trusted" target="_blank">trusted subscription</a></li>
              <li>The registered application should register a redirect URL which will, on the end user's device, open the installed application with a specific path (custom schemas, such as <code>myapp://</code> are also allowed)</li>
              <li>By creating a subscription to the Mobile API, the developer obtains client credentials for the mobile application, a client ID and a client secret; for this use case, only the client ID is significant</li>
              <li>The developer incorporates the client ID into the mobile application and implements the needed bits for the OAuth2.0 Authorization Code Grant with the PKCE extension.</li>
            </ol>
            <p>
              For the Authorization Code Grant to work with public clients (a client which is not running on a server backend), wicked.haufe.io
              requires the PKCE extension to be implemented. Any deployed portal itself contains more information on the details on how to implement
              this, see e.g. the <a href="https://wicked-demo.haufe.io/help/oauth2_authorization_code" target="_blank">help pages of the wicked Demo portal</a>.
              
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="container pad20">
      <div class="row">
        <div class="col-md-8">
          <h4>Runtime Workflow</h4>
          <p>
            At runtime, the authentication and authorization of the API usage for the end user inside the mobile app will work as follows.
            When the end user opens the application for the first time, this happens:
          </p>
          <ol>
            <li>The mobile app shows a web view and redirects to the Authorization end point of the wicked Authorization Server (depending on which identity provider was configured)</li>
            <li>
              By checking the client ID of the authorization call, the Authorization Server knows which application is requesting access
              to the API, and can in turn verify the identity of the calling user (with whichever identity provider is configured)
            </li>
            <li>
              If the user identity was successfully established, the Authorization Sevrer now answers with a redirect back to the application,
              possibly using a custom schema, such as <code>myapp://hello/world?code=abcdefabcdefabcdef</code>.
            </li>
            <li>
              The application now uses the token and a PKCE code verifier to retrieve an access token and a refresh token, according to
              the standard OAuth 2.0 Authorization Code Grant.
              
            </li>
          </ol>
          <p>
            All requests which the application now issues towards the API will be enriched with (a) the client identity, and (b) the end
            user's identity, passed on as headers.
            
          </p>
        </div>
      </div>
    </div>
    <div class="grey">
      <div class="container pad20">
        <div class="row">
          <div class="col-md-4">
            <p>&nbsp;</p>
          </div>
          <div class="col-md-8">
            <h4>How do I implement this with wicked?</h4>
            <p>
              Wicked packs brings all the necessary components to implement this out of the box, including the PKCE
              extension:
              
            </p>
            <ul>
              <li>
                Wicked stores usernames and passwords, and if needed, can also ask new users for additional
                information (registration information). It can also federate any other supported Identity Provider,
                such as any SAML ot OAuth2 IdP, Google, GitHub,...
              </li>
              <li>
                The wicked Authorization Server automatically creates suitable endpoints so that your API can
                only be accessed using access tokens which are created using this endpoint.
              </li>
              <li>
                When your backend API is called from the Gateway Proxy, and a valid access token is presented,
                Kong will automatically inject <b>who</b> is calling (as <code>X-Authenticated-UserId</code>),
                which application is calling the API on behalf of the user.
              </li>
              <li>
                You can leverage this injected information to do further checking on the user as your business
                logic requires, but wicked makes sure that only well-known users are being let through to your
                API.
                
              </li>
            </ul>
            <p>
              In case you implement using node.js, you can also leverage the wicked SDK to have even more
              influence on the user and registration management. Read up on the wicked SDK here:
              
            </p>
            <ul>
              <li><a href="https://github.com/apim-haufe-io/wicked.node-sdk" target="_blank">GitHub Repository wicked.node-sdk</a></li>
              <li>
                <a href="https://apim-haufe-io.github.io/wicked.node-sdk" target="_blank">Wicked SDK documentation</a>
                
              </li>
            </ul>
            <p>
              As mentioned, wicked supports the PKCE extension of the Authorization Code Grant
              (see <a href="https://tools.ietf.org/html/rfc7636" target="_blank">RFC 7636</a>) and OAuth2 for native apps
              (see <a href="https://tools.ietf.org/html/rfc8252" target="_blank">RFC 8252</a>).
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="container">
      <hr>
      <!-- FOOTER-->
      <footer></footer>
      <p class="pull-right"><a href="#">Back to top</a></p>
      <p>© 2016-2018 Haufe-Lexware GmbH & Co. KG, <a href="http://www.haufe-lexware.com">www.haufe-lexware.com</a>, <a href="http://www.haufe.de">www.haufe.de</a>, <a href="http://www.lexware.de">www.lexware.de</a>, <a href="http://www.haufe-akademie.de">www.haufe-akademie.de</a></p>
    </div>
    <!-- /.container-->
    <!--
    Bootstrap core JavaScript
    ==================================================
    -->
    <!-- Placed at the end of the document so the pages load faster-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\\/script>')</script>
    <script src="js/bootstrap.min.js"></script>
    <!-- Just to make our placeholder images work. Don't actually copy the next line!-->
    <script src="js/holder.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug-->
    <script src="js/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>